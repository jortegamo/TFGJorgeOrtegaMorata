<template name="conversation">
    <div class="content-wrapper conversation-page-wrapper">
        <div class="conversation-wrapper">

            <div class="conversation-header">
                <div class="title">
                    <p><i class="fa fa-comments icon-title"></i> {{shortSubject subject 20}}
                        <button id="editablePanelLauncher" class="pull-right" type="button"><i class="fa fa-pencil"></i></button>
                    </p>
                </div>
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-12">
                            <div id="membersMinified">
                                <ul>
                                    {{#each membersMinified}}
                                        {{>memberAvatar}}
                                    {{/each}}
                                </ul>
                                <p>
                                    {{#if moreUsers}}
                                        <span class="restUsers">+ {{restUsersCounter}}</span>
                                    {{/if}}
                                    <span class="counte pull-right"><i class="fa fa-reply"></i> {{messages_count}}</span>
                                    <span class="counter pull-right"><i class="fa fa-user"></i> {{members_count}}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="usersListPanel">
                <div class="usersListWrapper">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="userList">
                                    <ul>
                                        {{#each members}}
                                            {{>memberInfo}}
                                        {{/each}}
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="helpUsersAdd">
                        <p>To add more users to this conversation from your contacts click <i class="fa fa-pencil"></i></p>
                    </div>
                </div>
            </div>

            <div id="messages-list" class="conversation-content">
                <div class="container-fluid">
                    <div class="col-xs-12">
                        {{#each messages}}
                            {{>messageItem}}
                        {{/each}}
                    </div>
                </div>
            </div>

            <div class="conversation-footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-12">
                            <div id="inputMessageBox">
                                <div class="message-box">
                                    {{>inputMessageBox}}
                                </div>
                                <button id="send-button" type="button"><i class="fa fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</template>

<template name="memberAvatar">
    <li><img src="{{avatar}}"></li>
</template>

<template name="memberInfo">
    <li><img src="{{avatar}}">
        <p><span>{{username}}</span>
            <button class="pull-right" type="button">view profile</button>
        </p>
    </li>
</template>

<template name="messageItem">
    <div class="row">
        <div class="col-xs-12">
            {{#if owner}}
                <div class="message-item owner">
                    <div class="message-content">
                        <p class="username">{{username}}</p>
                        <div class="arrow"></div>
                        {{message}}
                        <div>
                            <p class="date pull-right"><i class="fa fa-clock-o"></i> {{dateFrom createdAt}}</p>
                        </div>
                    </div>
                    <img src="{{avatar}}">
                </div>
            {{else}}
                <div class="message-item">
                    <img src="{{avatar}}">
                    <div class="message-content">
                        <p class="username">{{username}}</p>
                        <div class="arrow"></div>
                        {{message}}
                        <div>
                            <p class="date pull-right"><i class="fa fa-clock-o"></i> {{dateFrom createdAt}}</p>
                        </div>
                    </div>
                </div>
            {{/if}}

        </div>
    </div>
</template>